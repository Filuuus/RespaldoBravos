<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}My Drive{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/drive_styles.css') }}">
    {# Add other global CSS from your project if needed #}
</head>
<body>
    <div class="drive-container"> {# Main container for flex/grid layout #}
        <header class="drive-header">
            {# Adapted from Inicio.html - Burger menu for sidebar toggle #}
            <label for="burger" class="burger">
                <input id="burger" type="checkbox" />
                <span></span><span></span><span></span>
            </label>

            {# Global Search Bar - Adapted from Inicio.html #}
            <div class="global-search-bar">
                <form class="form" action="#"> {# Placeholder for global search route - Temporarily changed #}
                    <button type="submit">
                        <svg width="17" height="16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="search">
                            <path d="M7.667 12.667A5.333 5.333 0 107.667 2a5.333 5.333 0 000 10.667zM14.334 14l-2.9-2.9" stroke="currentColor" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    <input class="input" name="q_global" placeholder="Search in Drive" required="" type="text" />
                </form>
            </div>

            {# User menu/icon - Adapted from file_list.html or Inicio.html #}
            <div class="user-menu">
                {% if session.user_id %}
                    {# User icon, dropdown for settings, logout etc. #}
                    <span>Welcome!</span> <a href="{{ url_for('logout') }}" class="btn btn-sm btn-secondary">Logout</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-sm btn-primary">Login</a>
                {% endif %}
            </div>
        </header>

        <div class ="drive-body-flex-row">
        <aside class="drive-sidebar">
            {# Permanent "+" Upload button can go here or be a FAB #}
            <div class="upload-button-container my-3">
                 <a href="{{ url_for('upload_route') }}" class="btn btn-primary btn-lg w-100">
                    <i class="bi bi-plus-lg"></i> New
                </a>
            </div>
            <nav>
                <ul>
                    {# Make sure you have an active class logic if needed, passed from your route #}
                    <li><a href="{{ url_for('list_files') }}" class="{{ 'active' if not current_folder_id and not current_page == 'activity_log' else '' }}">
                        <i class="bi bi-hdd-stack-fill me-2"></i>My Files
                    </a></li>
                    <li><a href="#"><i class="bi bi-clock-history me-2"></i>Recents</a></li> {# Placeholder #}
                    <li><a href="#"><i class="bi bi-star-fill me-2"></i>Favorites</a></li> {# Placeholder #}
                    <li><a href="{{ url_for('activity_log') }}" class="{{ 'active' if current_page == 'activity_log' else '' }}">
                        <i class="bi bi-activity me-2"></i>Activity Log
                    </a></li>
                    <li><a href="#"><i class="bi bi-trash-fill me-2"></i>Trash</a></li> {# Placeholder #}
                </ul>
            </nav>
            {# Folder tree can be loaded here later #}
        </aside>

        <main class="drive-main-content">
            {% block content %}{% endblock %}
        </main>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/drive_scripts.js') }}"></script>

</body>
</html>